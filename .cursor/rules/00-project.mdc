---
description:
globs:
alwaysApply: true
---
---
description: "Repo-wide engineering standards (TypeScript/React/Vite friendly)"
alwaysApply: true
---

# Project Engineering Rules

## Goals
- Ship working features with clean, maintainable code.
- Avoid overengineering; prefer small, composable modules.
- Make changes easy to review: minimal diff, clear intent, good names.

## Communication style
- Ask at most 1 question only when absolutely blocked.
- Otherwise: make reasonable assumptions, state them briefly, and proceed.
- If requirements are ambiguous, implement the safest default + leave TODOs.

## Architecture & organization
- Prefer feature-oriented structure (group by feature) over dumping everything into `utils/`.
- Keep modules small:
  - Components: focused, reusable.
  - Hooks: isolated side effects, stable interfaces.
  - Utilities: pure functions where possible.
- Avoid circular dependencies.

## TypeScript rules
- `noImplicitAny` mindset: do not introduce `any` unless unavoidable.
- Prefer explicit return types for exported functions and hooks.
- Prefer `unknown` over `any`, narrow with type guards.
- Do not widen types unnecessarily.

## React rules
- Prefer function components + hooks.
- Keep state local; lift state only when needed.
- Avoid unnecessary `useEffect`. Prefer derived state and memoization only when it matters.
- Handle loading/error/empty states explicitly in UI flows.

## Code quality baseline
- Add basic runtime validation at boundaries (e.g., parsing external data).
- Handle error paths: show user-friendly errors, log useful dev info.
- Avoid silent failures.

## Performance & UX
- Avoid blocking the main thread with heavy computation.
- Prefer pagination/virtualization for large lists when relevant.
- Debounce user input when hitting network.

## Security
- Never commit secrets.
- Treat user input as untrusted; sanitize/validate when used in URLs, HTML, or queries.
- Avoid dangerous HTML injection patterns (`dangerouslySetInnerHTML`) unless explicitly required.

## Testing
- If the repo has tests, update/add tests with behavioral changes.
- For UI changes: provide a quick manual test checklist.

## Documentation
- Update README or inline docs when behavior changes.
- Prefer short, actionable docs (how to run, how to verify).
